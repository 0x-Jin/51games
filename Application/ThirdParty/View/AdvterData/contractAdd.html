<body>
<style type="text/css">
    input{border-radius: 4px;}
</style>
<div class="demo-content" style="overflow-y:auto; overflow-x:hidden; height:460px;">
    <!-- 此节点内部的内容会在弹出框内显示,默认隐藏此节点-->
    <form id="J_Form" class="form-horizontal" method="post" action="{:U('AdvterData/contractAdd')}" enctype="multipart/form-data">
        <div class="row">
            <div class="control-group span8">
                <label class="control-label">部门：</label>
                <div class="controls">
                    <select name="partment">
                        <option value="1">发行一部</option>
                        <option value="2">发行二部</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">合同签订单位：</label>
                <div class="controls">
                    <input type="text" id="company" class="input-normal" data-rules="{required:true}" name="company" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">合同名称：</label>
                <div class="controls">
                    <input type="text" id="contract" class="input-normal" data-rules="{required:true}" name="contract" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">合同编号：</label>
                <div class="controls">
                    <input type="text" id="contractNo" class="input-normal" data-rules="{required:true}" name="contractNo" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">游戏名称：</label>
                <div class="controls">
                    <input type="text" id="game" class="input-normal" name="game" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">签订人：</label>
                <div class="controls">
                    <select name="principalId">
                        <volist name="principal" id="val">
                            <option value="{$val.id}">{$val.principal_name}</option>
                        </volist>
                    </select>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">跟进人：</label>
                <div class="controls">
                    <select name="followAdmin">
                        <volist name="follow" id="val">
                            <option value="{$val.id}">{$val.real}</option>
                        </volist>
                    </select>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span9">
                <label class="control-label">合同类别：</label>
                <div class="controls">
                    <select id="type_select" onclick="makeType()">
                        <option value="">请选择类别</option>
                        <volist name="type" id="val">
                            <option value="{$val.type}">{$val.type}</option>
                        </volist>
                    </select>
                    <input type="text" id="type_input" class="input-normal" name="type" style="display: none" />
                    <input type="button" id="change_type" value="新增类别" class="button-info" onclick="changeType()" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span9" style="height: 70px;">
                <label class="control-label">主要条款：</label>
                <div class="controls">
                    <textarea name="info" id="info" cols="30" rows="5" style="width: 200px;"></textarea>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">签订日期：</label>
                <div class="controls">
                    <input type="text" id="fileTime" class="calendar" name="fileTime" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">是否生效：</label>
                <div class="controls">
                    <select name="status">
                        <option value="0">是</option>
                        <option value="1">否</option>
                        <option value="2">空号</option>
                        <option value="3">作废</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">生效日期：</label>
                <div class="controls">
                    <input type="text" id="startTime" class="calendar" name="startTime" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">终止日期：</label>
                <div class="controls">
                    <input type="text" id="endTime" class="calendar" name="endTime" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">结算方式：</label>
                <div class="controls">
                    <select name="payType">
                        <option value="1">日结</option>
                        <option value="2">月结</option>
                        <option value="3">预付</option>
                        <option value="4">垫付</option>
                        <option value="5">分期</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">总金额：</label>
                <div class="controls">
                    <input type="text" class="input-normal" name="amount" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">付款日期：</label>
                <div class="controls">
                    <input type="text" id="payTime" class="calendar" name="payTime" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">已付金额：</label>
                <div class="controls">
                    <input type="text" class="input-normal" name="payAmount" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">票据号：</label>
                <div class="controls">
                    <input type="text" class="input-normal" name="receipt" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">未付金额：</label>
                <div class="controls">
                    <input type="text" class="input-normal" name="unpaidAmount" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">收到发票金额：</label>
                <div class="controls">
                    <input type="text" class="input-normal" name="invoiceAmount" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">未收票据金额：</label>
                <div class="controls">
                    <input type="text" class="input-normal" name="unInvoiceAmount" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">备注：</label>
                <div class="controls">
                    <input type="text" class="input-normal" name="ext" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="control-group span8">
                <label class="control-label">附件：</label>
                <div class="controls">
                    <input type="file" class="input-normal" name="file"/>
                </div>
            </div>
        </div>

    </form>
</div>

<!-- script start -->
<script type="text/javascript">
    BUI.use(['bui/overlay', 'bui/form', 'bui/calendar'], function(Overlay, Form, Calendar) {
        var form = new Form.HForm({
            srcNode: '#J_Form'
        }).render();

        var dialog = new Overlay.Dialog({
            title: '合同录入',
            width: 500,
            height: 520,
            //配置DOM容器的编号
            contentId: 'content',
            success: function() {
                $('#J_Form').submit();
            }
        });

        var datepicker = new Calendar.DatePicker({
            trigger: '#costMonth',
            dateMask: 'yyyy/mm/dd',
            autoRender: true
        });

        dialog.show();
    });

    function changeType() {
        var _val = $("#change_type").val();
        if (_val == "新增类别") {
            $("#type_input").val("").show();
            $("#type_select").val("").hide();
            $("#change_type").val("选择类别");
        } else {
            $("#type_input").val("").hide();
            $("#type_select").val("").show();
            $("#change_type").val("新增类别");
        }
    }

    function makeType() {
        $("#type_input").val($("#type_select").val());
    }
</script>
<!-- script end -->
</div>
</body>
</html>
